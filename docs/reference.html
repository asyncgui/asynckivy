<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Transition (submodule)" href="submod-transition.html" /><link rel="prev" title="Notes ðŸ‡¯ðŸ‡µ" href="notes-ja.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2023.09.10 -->
        <title>API Reference - asynckivy 0.10.0.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">asynckivy 0.10.0.dev1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">asynckivy 0.10.0.dev1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="notes.html">Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes-ja.html">Notes ðŸ‡¯ðŸ‡µ</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="submod-transition.html">Transition (submodule)</a></li>
<li class="toctree-l1"><a class="reference internal" href="submod-modal.html">Modal (submodule)</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="module-asynckivy">
<span id="api-reference"></span><h1>API Reference<a class="headerlink" href="#module-asynckivy" title="Link to this heading">Â¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.anim_attrs">
<span class="sig-name descname"><span class="pre">anim_attrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">animated_properties</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.anim_attrs" title="Link to this definition">Â¶</a></dt>
<dd><p>Animates attibutes of any object.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">types</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">SimpleNamespace</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">))</span>
<span class="k">await</span> <span class="n">anim_attrs</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unlike <a class="reference external" href="https://kivy.org/doc/master/api-kivy.animation.html#kivy.animation.Animation" title="(in Kivy v3.0.0.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">kivy.animation.Animation</span></code></a>, this one does not support dictionary-type and nested-sequence.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">anim_attrs</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">pos_hint</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">1.</span><span class="p">})</span>  <span class="c1"># not supported</span>
<span class="k">await</span> <span class="n">anim_attrs</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">nested_sequence</span><span class="o">=</span><span class="p">[[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="p">]])</span>  <span class="c1"># not supported</span>

<span class="k">await</span> <span class="n">anim_attrs</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>  <span class="c1"># OK</span>
</pre></div>
</div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.6.1.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.0: </span>The <code class="docutils literal notranslate"><span class="pre">output_seq_type</span></code> parameter was removed.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.anim_attrs_abbr">
<span class="sig-name descname"><span class="pre">anim_attrs_abbr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">animated_properties</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.anim_attrs_abbr" title="Link to this definition">Â¶</a></dt>
<dd><p><a class="reference internal" href="#asynckivy.anim_attrs" title="asynckivy.anim_attrs"><code class="xref py py-func docutils literal notranslate"><span class="pre">anim_attrs()</span></code></a> cannot animate attributes named <code class="docutils literal notranslate"><span class="pre">step</span></code>, <code class="docutils literal notranslate"><span class="pre">duration</span></code> and <code class="docutils literal notranslate"><span class="pre">transition</span></code> but this one can.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.6.1.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.0: </span>The <code class="docutils literal notranslate"><span class="pre">output_seq_type</span></code> parameter was removed.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.anim_with_ratio">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">anim_with_ratio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.anim_with_ratio" title="Link to this definition">Â¶</a></dt>
<dd><p>Returns an async iterator that yields the elapsed time since the start of the iteration, divided by <code class="docutils literal notranslate"><span class="pre">base</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">anim_with_ratio</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<p>The code above is equivalent to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">sleep_freq</span><span class="p">()</span> <span class="k">as</span> <span class="n">sleep</span><span class="p">:</span>
    <span class="n">base</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">total_elapsed_time</span> <span class="o">=</span> <span class="mf">0.</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">total_elapsed_time</span> <span class="o">+=</span> <span class="k">await</span> <span class="n">sleep</span><span class="p">()</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">total_elapsed_time</span> <span class="o">/</span> <span class="n">base</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<p>Use <a class="reference external" href="https://kivy.org/doc/master/api-kivy.animation.html#kivy.animation.AnimationTransition" title="(in Kivy v3.0.0.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">kivy.animation.AnimationTransition</span></code></a> for non-linear curves.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">kivy.animation</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnimationTransition</span>

<span class="n">in_cubic</span> <span class="o">=</span> <span class="n">AnimationTransition</span><span class="o">.</span><span class="n">in_cubic</span>

<span class="k">async</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">anim_with_ratio</span><span class="p">(</span><span class="n">base</span><span class="o">=...</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">in_cubic</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.6.1.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">duration</span></code> parameter was replaced with <code class="docutils literal notranslate"><span class="pre">base</span></code>.
The loop no longer ends on its own.</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asynckivy.block_touch_events">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">block_touch_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_dispatcher</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter=&lt;function</span> <span class="pre">block_touch_events.&lt;lambda&gt;&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.block_touch_events" title="Link to this definition">Â¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">block_touch_events</span><span class="p">(</span><span class="n">widget</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Returns a context manager that blocks all touch events that meet <strong>both</strong> of the following criteria:</p>
<ul class="simple">
<li><p>The touch is not currently grabbed by any widget. (i.e. <code class="docutils literal notranslate"><span class="pre">touch.grab_current</span> <span class="pre">is</span> <span class="pre">None</span></code>)</p></li>
<li><p>The touch is inside the widgetâ€™s bounding box. (i.e. <code class="docutils literal notranslate"><span class="pre">widget.collide_point(*touch.pos)</span></code>)</p></li>
</ul>
<p>Basically equivalent to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="n">grab_current</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">collide_point</span><span class="p">(</span><span class="o">*</span><span class="n">t</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
<span class="k">with</span> <span class="p">(</span>
    <span class="n">suppress_event</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;on_motion&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">f</span><span class="p">),</span>
    <span class="n">suppress_event</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;on_touch_down&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">f</span><span class="p">),</span>
    <span class="n">suppress_event</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;on_touch_move&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">f</span><span class="p">),</span>
    <span class="n">suppress_event</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;on_touch_up&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">f</span><span class="p">),</span>
<span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.10.0.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.event">
<span class="sig-name descname"><span class="pre">event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_dispatcher</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_dispatching</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.event" title="Link to this definition">Â¶</a></dt>
<dd><p>Returns an <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Awaitable</span></code></a> that can be used to wait for:</p>
<ul class="simple">
<li><p>a Kivy event to occur.</p></li>
<li><p>a Kivy propertyâ€™s value to change.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wait for a button to be pressed.</span>
<span class="k">await</span> <span class="n">event</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="s1">&#39;on_press&#39;</span><span class="p">)</span>

<span class="c1"># Wait for an &#39;on_touch_down&#39; event to occur.</span>
<span class="n">__</span><span class="p">,</span> <span class="n">touch</span> <span class="o">=</span> <span class="k">await</span> <span class="n">event</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;on_touch_down&#39;</span><span class="p">)</span>

<span class="c1"># Wait for &#39;widget.x&#39; to change.</span>
<span class="n">__</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ak</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">filter</span></code> parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wait for an &#39;on_touch_down&#39; event to occur inside a widget.</span>
<span class="n">__</span><span class="p">,</span> <span class="n">touch</span> <span class="o">=</span> <span class="k">await</span> <span class="n">event</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;on_touch_down&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">t</span><span class="p">:</span> <span class="n">w</span><span class="o">.</span><span class="n">collide_point</span><span class="p">(</span><span class="o">*</span><span class="n">t</span><span class="o">.</span><span class="n">opos</span><span class="p">))</span>

<span class="c1"># Wait for &#39;widget.x&#39; to become greater than 100.</span>
<span class="k">if</span> <span class="n">widget</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">event</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">__</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">stop_dispatching</span></code> parameter:</p>
<blockquote>
<div><p>This only works for events not for properties.</p>
</div></blockquote>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asynckivy.event_freq">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">event_freq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_dispatcher</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_dispatching</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">free_to_await</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.event_freq" title="Link to this definition">Â¶</a></dt>
<dd><p>When handling a frequently occurring event, such as <code class="docutils literal notranslate"><span class="pre">on_touch_move</span></code>, the following kind of code <em>might</em> cause
performance issues:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">__</span><span class="p">,</span> <span class="n">touch</span> <span class="o">=</span> <span class="k">await</span> <span class="n">event</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;on_touch_down&#39;</span><span class="p">)</span>

<span class="c1"># This loop registers and unregisters an event handler on every iteration.</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">event</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;on_touch_move&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span> <span class="ow">is</span> <span class="n">touch</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>If that happens, try the following code instead. It might resolve the issue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">__</span><span class="p">,</span> <span class="n">touch</span> <span class="o">=</span> <span class="k">await</span> <span class="n">event</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;on_touch_down&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">event_freq</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;on_touch_move&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span> <span class="ow">is</span> <span class="n">touch</span><span class="p">)</span> <span class="k">as</span> <span class="n">on_touch_move</span><span class="p">:</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">on_touch_move</span><span class="p">()</span>
        <span class="o">...</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.7.1.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.0: </span>The <code class="docutils literal notranslate"><span class="pre">free_to_await</span></code> parameter was added.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">free_to_await</span></code> parameter:</p>
<p>If set to False (the default), the only permitted async operation within the with-block is <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">xxx()</span></code>,
where <code class="docutils literal notranslate"><span class="pre">xxx</span></code> is the identifier specified in the as-clause. To lift this restriction, set <code class="docutils literal notranslate"><span class="pre">free_to_await</span></code> to
True â€” at the cost of slightly reduced performance.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.fade_transition">
<span class="sig-name descname"><span class="pre">fade_transition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">widgets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.fade_transition" title="Link to this definition">Â¶</a></dt>
<dd><p>Returns an async context manager that:</p>
<ul class="simple">
<li><p>fades out the given widgets on <code class="docutils literal notranslate"><span class="pre">__aenter__</span></code></p></li>
<li><p>fades them back  in on <code class="docutils literal notranslate"><span class="pre">__aexit__</span></code></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">fade_transition</span><span class="p">(</span><span class="n">widget1</span><span class="p">,</span> <span class="n">widget2</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">widgets</span></code> donâ€™t have to be actual Kivy widgets.
Anything with an attribute named <code class="docutils literal notranslate"><span class="pre">opacity</span></code>â€“such as <code class="docutils literal notranslate"><span class="pre">kivy.core.window.Window</span></code>â€“would work.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 0.9.0: </span>This will be removed in version 0.11.0. Use <a class="reference internal" href="submod-transition.html#asynckivy.transition.fade_multiple" title="asynckivy.transition.fade_multiple"><code class="xref py py-func docutils literal notranslate"><span class="pre">asynckivy.transition.fade_multiple()</span></code></a> instead.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.interpolate">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">interpolate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator" title="(in Python v3.14)"><span class="pre">AsyncIterator</span></a></span></span><a class="headerlink" href="#asynckivy.interpolate" title="Link to this definition">Â¶</a></dt>
<dd><p>Interpolates between the values <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> in an async-manner.
Inspired by wasabi2dâ€™s <a class="reference external" href="https://wasabi2d.readthedocs.io/en/stable/coros.html#clock.coro.interpolate">interpolate</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">interpolate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">.3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</pre></div>
</div>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>elapsed time</p></th>
<th class="head"><p>output</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0 sec</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>0.3 sec</p></td>
<td><p>30</p></td>
</tr>
<tr class="row-even"><td><p>0.6 sec</p></td>
<td><p>60</p></td>
</tr>
<tr class="row-odd"><td><p>0.9 sec</p></td>
<td><p>90</p></td>
</tr>
<tr class="row-even"><td><p><strong>1.2 sec</strong></p></td>
<td><p>100</p></td>
</tr>
</tbody>
</table>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.interpolate_seq">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">interpolate_seq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator" title="(in Python v3.14)"><span class="pre">AsyncIterator</span></a></span></span><a class="headerlink" href="#asynckivy.interpolate_seq" title="Link to this definition">Â¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#asynckivy.interpolate" title="asynckivy.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate()</span></code></a> except this one is for sequence types.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">interpolate_seq</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>elapsed time</p></th>
<th class="head"><p>output</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>[0, 50]</p></td>
</tr>
<tr class="row-odd"><td><p>0.3</p></td>
<td><p>[30, 65]</p></td>
</tr>
<tr class="row-even"><td><p>0.6</p></td>
<td><p>[60, 80]</p></td>
</tr>
<tr class="row-odd"><td><p>0.9</p></td>
<td><p>[90, 95]</p></td>
</tr>
<tr class="row-even"><td><p><strong>1.2 sec</strong></p></td>
<td><p>[100, 100]</p></td>
</tr>
</tbody>
</table>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.7.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.0: </span>The <code class="docutils literal notranslate"><span class="pre">output_type</span></code> parameter was removed. The iterator now always yields a list.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.managed_start">
<span class="sig-name descname"><span class="pre">managed_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable" title="(in Python v3.14)"><span class="pre">Awaitable</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://asyncgui.github.io/asyncgui/reference.html#asyncgui.Task" title="(in asyncgui)"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">daemon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://asyncgui.github.io/asyncgui/reference.html#asyncgui.Task" title="(in asyncgui)"><span class="pre">Task</span></a></span></span><a class="headerlink" href="#asynckivy.managed_start" title="Link to this definition">Â¶</a></dt>
<dd><p>A task started with this function will be automatically cancelled when an <code class="docutils literal notranslate"><span class="pre">App.on_stop</span></code>
event fires, if it is still running. This prevents the task from being cancelled by the garbage
collector, ensuring more reliable cleanup. You should always use this function instead of calling
<code class="docutils literal notranslate"><span class="pre">asynckivy.start</span></code> directly, except when writing unit tests.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">task</span> <span class="o">=</span> <span class="n">managed_start</span><span class="p">(</span><span class="n">async_func</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.7.1.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.move_on_after">
<span class="sig-name descname"><span class="pre">move_on_after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/contextlib.html#contextlib.AbstractAsyncContextManager" title="(in Python v3.14)"><span class="pre">AbstractAsyncContextManager</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://asyncgui.github.io/asyncgui/reference.html#asyncgui.Task" title="(in asyncgui)"><span class="pre">Task</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#asynckivy.move_on_after" title="Link to this definition">Â¶</a></dt>
<dd><p>Returns an async context manager that applies a time limit to its code block,
like <a class="reference external" href="https://trio.readthedocs.io/en/stable/reference-core.html#trio.move_on_after" title="(in Trio v0.32.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">trio.move_on_after()</span></code></a> does.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">move_on_after</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span> <span class="k">as</span> <span class="n">timeout_tracker</span><span class="p">:</span>
    <span class="o">...</span>
<span class="k">if</span> <span class="n">timeout_tracker</span><span class="o">.</span><span class="n">finished</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The code block was interrupted due to a timeout&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The code block exited gracefully.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.6.1.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.n_frames">
<span class="sig-name descname"><span class="pre">n_frames</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.n_frames" title="Link to this definition">Â¶</a></dt>
<dd><p>Waits for a specified number of frames to elapse.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">n_frames</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to wait for one frame, <a class="reference internal" href="#asynckivy.sleep" title="asynckivy.sleep"><code class="xref py py-func docutils literal notranslate"><span class="pre">asynckivy.sleep()</span></code></a> is preferable for a performance reason.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.rest_of_touch_events">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rest_of_touch_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">widget</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">touch</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_dispatching</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator" title="(in Python v3.14)"><span class="pre">AsyncIterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#asynckivy.rest_of_touch_events" title="Link to this definition">Â¶</a></dt>
<dd><p>Returns an async iterator that yields None on each <code class="docutils literal notranslate"><span class="pre">on_touch_move</span></code> event
and stops when an <code class="docutils literal notranslate"><span class="pre">on_touch_up</span></code> event occurs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">__</span> <span class="ow">in</span> <span class="n">rest_of_touch_events</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;on_touch_move&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;on_touch_up&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grab</strong> â€“ If set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, this API will not rely on <code class="docutils literal notranslate"><span class="pre">touch.grab()</span></code>, which means there is no guarantee
that all events from the given touch will be delivered to the widget, <a class="reference external" href="https://kivy.org/doc/master/guide/inputs.html#grabbing-touch-events">as documented</a>.
If the <code class="docutils literal notranslate"><span class="pre">on_touch_up</span></code> event is not delivered, the iterator will wait indefinitely for itâ€”an event
that never comes. Do not set this to <code class="docutils literal notranslate"><span class="pre">False</span></code> unless you know what you are doing.</p></li>
<li><p><strong>stop_dispatching</strong> â€“ Whether to stop dispatching non-grabbed touch events.
(Grabbed events are always stopped if the <code class="docutils literal notranslate"><span class="pre">grab</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.)
For details, see <a class="reference external" href="https://kivy.org/doc/master/api-kivy.uix.widget.html#widget-touch-event-bubbling">event-bubbling</a>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You should not use this when Kivy is running in async mode. Use <a class="reference internal" href="#asynckivy.rest_of_touch_events_cm" title="asynckivy.rest_of_touch_events_cm"><code class="xref py py-func docutils literal notranslate"><span class="pre">rest_of_touch_events_cm()</span></code></a> instead.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.0: </span>The <code class="docutils literal notranslate"><span class="pre">timeout</span></code> parameter was removed.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.1: </span>The <code class="docutils literal notranslate"><span class="pre">grab</span></code> parameter was added.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.rest_of_touch_events_cm">
<span class="sig-name descname"><span class="pre">rest_of_touch_events_cm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">widget</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">touch</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_dispatching</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">free_to_await</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.rest_of_touch_events_cm" title="Link to this definition">Â¶</a></dt>
<dd><p>A variant of <a class="reference internal" href="#asynckivy.rest_of_touch_events" title="asynckivy.rest_of_touch_events"><code class="xref py py-func docutils literal notranslate"><span class="pre">rest_of_touch_events()</span></code></a>.
This version is more verbose, but remains safe even when Kivy is running in async mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">rest_of_touch_events_cm</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">touch</span><span class="p">)</span> <span class="k">as</span> <span class="n">on_touch_move</span><span class="p">:</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">on_touch_move</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;on_touch_move&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;on_touch_up&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.1.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.run_in_executor">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_in_executor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">executor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ThreadPoolExecutor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.run_in_executor" title="Link to this definition">Â¶</a></dt>
<dd><p>Runs a function within a <a class="reference external" href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.ThreadPoolExecutor</span></code></a>, and waits for the completion of the
function.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">executor</span> <span class="o">=</span> <span class="n">ThreadPoolExecutor</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">return_value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">run_in_executor</span><span class="p">(</span><span class="n">executor</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="notes.html#io-in-asynckivy"><span class="std std-ref">I/O in AsyncKivy</span></a> for details.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When the caller Task is cancelled, the <code class="docutils literal notranslate"><span class="pre">func</span></code> will be left running if it has already started,
which violates â€œstructured concurrencyâ€.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.run_in_thread">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_in_thread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">daemon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.run_in_thread" title="Link to this definition">Â¶</a></dt>
<dd><p>Creates a new thread, runs a function within it, then waits for the completion of that function.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">return_value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">run_in_thread</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="notes.html#io-in-asynckivy"><span class="std std-ref">I/O in AsyncKivy</span></a> for details.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When the caller Task is cancelled, the <code class="docutils literal notranslate"><span class="pre">func</span></code> will be left running, which violates â€œstructured concurrencyâ€.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.sandwich_canvas">
<span class="sig-name descname"><span class="pre">sandwich_canvas</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://kivy.org/doc/master/api-kivy.graphics.html#kivy.graphics.Canvas" title="(in Kivy v3.0.0.dev0)"><span class="pre">kivy.graphics.Canvas</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_bun</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://kivy.org/doc/master/api-kivy.graphics.html#kivy.graphics.Instruction" title="(in Kivy v3.0.0.dev0)"><span class="pre">kivy.graphics.Instruction</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bottom_bun</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://kivy.org/doc/master/api-kivy.graphics.html#kivy.graphics.Instruction" title="(in Kivy v3.0.0.dev0)"><span class="pre">kivy.graphics.Instruction</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insertion_layer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.14)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'inner'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'outer'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'inner_outer'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'inner'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.sandwich_canvas" title="Link to this definition">Â¶</a></dt>
<dd><p>Returns a context manager that sandwiches the <code class="docutils literal notranslate"><span class="pre">target</span></code>â€™s graphics instructions between the
<code class="docutils literal notranslate"><span class="pre">top_bun</span></code> and <code class="docutils literal notranslate"><span class="pre">bottom_bun</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The text of this label is drawn 20 pixels to the right of its original position.</span>
<span class="k">with</span> <span class="n">sandwich_canvas</span><span class="p">(</span><span class="n">label</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span> <span class="n">Translate</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">Translate</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">insertion_layer</span></code> parameter controls where <code class="docutils literal notranslate"><span class="pre">top_bun</span></code> and <code class="docutils literal notranslate"><span class="pre">bottom_bun</span></code> are inserted within the target
canvas. If set to â€œinnerâ€ (the default), they are inserted into the <strong>outer side</strong> of the <strong>inner</strong> canvas:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ... represents existing instructions</span>

<span class="nt">Widget</span><span class="p">:</span>
<span class="w">    </span><span class="nt">canvas.before</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="nt">canvas</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">top_bun</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">bottom_bun</span>
<span class="w">    </span><span class="nt">canvas.after</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>If set to â€œouterâ€, they are inserted into the <strong>outer side</strong> of the <strong>outer</strong> canvas:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">Widget</span><span class="p">:</span>
<span class="w">    </span><span class="nt">canvas.before</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">top_bun</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="nt">canvas</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="nt">canvas.after</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">bottom_bun</span>
</pre></div>
</div>
<p>If set to â€œinner_outerâ€, they are inserted into the <strong>inner side</strong> of the <strong>outer</strong> canvas:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">Widget</span><span class="p">:</span>
<span class="w">    </span><span class="nt">canvas.before</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">top_bun</span>
<span class="w">    </span><span class="nt">canvas</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="nt">canvas.after</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">bottom_bun</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.10.0.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.sleep">
<span class="sig-name descname"><span class="pre">sleep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">duration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.sleep" title="Link to this definition">Â¶</a></dt>
<dd><p>An async form of <code class="xref py py-meth docutils literal notranslate"><span class="pre">kivy.clock.Clock.schedule_once()</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># wait for 5 seconds</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.sleep_free">
<span class="sig-name descname"><span class="pre">sleep_free</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">duration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.sleep_free" title="Link to this definition">Â¶</a></dt>
<dd><p>An async form of <code class="xref py py-meth docutils literal notranslate"><span class="pre">kivy.clock.Clock.schedule_once_free()</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">sleep_free</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># wait for 5 seconds</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asynckivy.sleep_freq">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sleep_freq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">free_to_await</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.sleep_freq" title="Link to this definition">Â¶</a></dt>
<dd><p>An async form of <code class="xref py py-meth docutils literal notranslate"><span class="pre">kivy.clock.Clock.schedule_interval()</span></code>. The following callback-style code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">callback</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">some_condition</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="n">Clock</span><span class="o">.</span><span class="n">schedule_interval</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<p>is equivalent to the following async-style code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">sleep_freq</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span> <span class="k">as</span> <span class="n">sleep</span><span class="p">:</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">sleep</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">some_condition</span><span class="p">:</span>
            <span class="k">break</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.8.0: </span>The API was made private.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.0: </span></p>
<ul class="simple">
<li><p>The API was made public again.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">free_to_await</span></code> parameter was added.</p></li>
</ul>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">free_to_await</span></code> parameter:</p>
<p>If set to False (the default), the only permitted async operation within the with-block is <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">xxx()</span></code>,
where <code class="docutils literal notranslate"><span class="pre">xxx</span></code> is the identifier specified in the as-clause. To lift this restriction, set <code class="docutils literal notranslate"><span class="pre">free_to_await</span></code> to
True â€” at the cost of slightly reduced performance.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asynckivy.smooth_attr">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">smooth_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://kivy.org/doc/master/api-kivy.event.html#kivy.event.EventDispatcher" title="(in Kivy v3.0.0.dev0)"><span class="pre">kivy.event.EventDispatcher</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">follower</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">speed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_diff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">kivy.metrics.dp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.smooth_attr" title="Link to this definition">Â¶</a></dt>
<dd><p>Makes an attribute smoothly follow another.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">types</span>

<span class="n">widget</span> <span class="o">=</span> <span class="n">Widget</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">SimpleNamespace</span><span class="p">(</span><span class="n">xx</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># &#39;obj.xx&#39; will smoothly follow &#39;widget.x&#39;.</span>
<span class="n">smooth_attr</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">follower</span><span class="o">=</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;xx&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>To make its effect temporary, use it with a with-statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The effect lasts only within the with-block.</span>
<span class="k">with</span> <span class="n">smooth_attr</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>A key feature of this API is that if the target value changes while being followed,
the follower automatically adjusts to the new value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> â€“ <p>Must be a numeric or numeric sequence type property, that is, one of the following:</p>
<ul>
<li><p><a class="reference external" href="https://kivy.org/doc/master/api-kivy.properties.html#kivy.properties.NumericProperty" title="(in Kivy v3.0.0.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumericProperty</span></code></a></p></li>
<li><p><a class="reference external" href="https://kivy.org/doc/master/api-kivy.properties.html#kivy.properties.BoundedNumericProperty" title="(in Kivy v3.0.0.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoundedNumericProperty</span></code></a></p></li>
<li><p><a class="reference external" href="https://kivy.org/doc/master/api-kivy.properties.html#kivy.properties.ReferenceListProperty" title="(in Kivy v3.0.0.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReferenceListProperty</span></code></a></p></li>
<li><p><a class="reference external" href="https://kivy.org/doc/master/api-kivy.properties.html#kivy.properties.ListProperty" title="(in Kivy v3.0.0.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListProperty</span></code></a></p></li>
<li><p><a class="reference external" href="https://kivy.org/doc/master/api-kivy.properties.html#kivy.properties.ColorProperty" title="(in Kivy v3.0.0.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColorProperty</span></code></a></p></li>
</ul>
</p></li>
<li><p><strong>speed</strong> â€“ The speed coefficient for following. A larger value results in faster following.</p></li>
<li><p><strong>min_diff</strong> â€“ If the difference between the target and the follower is less than this value,
the follower will instantly jump to the targetâ€™s value. When the target is a <code class="docutils literal notranslate"><span class="pre">ColorProperty</span></code>,
you most likely want to set this to a very small value, such as <code class="docutils literal notranslate"><span class="pre">0.01</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">dp(2)</span></code>.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.8.0.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.stencil_mask">
<span class="sig-name descname"><span class="pre">stencil_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">widget</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">working_layer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.14)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'inner'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'outer'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'inner_outer'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'inner'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator" title="(in Python v3.14)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://kivy.org/doc/master/api-kivy.graphics.html#kivy.graphics.InstructionGroup" title="(in Kivy v3.0.0.dev0)"><span class="pre">kivy.graphics.InstructionGroup</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#asynckivy.stencil_mask" title="Link to this definition">Â¶</a></dt>
<dd><p>Returns a context manager that allows restricting the drawing area of a specified widget to an arbitrary shape.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">stencil_mask</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span> <span class="k">as</span> <span class="n">drawable_area</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The most common use case would be to confine drawing to the widgetâ€™s own area,
which can be achieved as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">kivy.graphics</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rectangle</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">asynckivy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ak</span>

<span class="n">rect</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">()</span>
<span class="k">with</span> <span class="p">(</span>
    <span class="n">ak</span><span class="o">.</span><span class="n">sync_attr</span><span class="p">(</span><span class="n">from_</span><span class="o">=</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;pos&#39;</span><span class="p">),</span> <span class="n">to_</span><span class="o">=</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="s1">&#39;pos&#39;</span><span class="p">)),</span>  <span class="c1"># A</span>
    <span class="n">ak</span><span class="o">.</span><span class="n">sync_attr</span><span class="p">(</span><span class="n">from_</span><span class="o">=</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">),</span> <span class="n">to_</span><span class="o">=</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">)),</span>
    <span class="n">ak</span><span class="o">.</span><span class="n">stencil_mask</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span> <span class="k">as</span> <span class="n">drawable_area</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">drawable_area</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Since this use case is so common, <a class="reference internal" href="#asynckivy.stencil_widget_mask" title="asynckivy.stencil_widget_mask"><code class="xref py py-func docutils literal notranslate"><span class="pre">stencil_widget_mask()</span></code></a> is provided as a shorthand.
Also, note that if the <code class="docutils literal notranslate"><span class="pre">widget</span></code> is a relative-type widget and the <code class="docutils literal notranslate"><span class="pre">working_layer</span></code> is not â€œouterâ€,
line A above must be removed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>working_layer</strong> â€“ Controls which part of the widgetâ€™s canvas is affected by the restriction.
See <a class="reference internal" href="#asynckivy.sandwich_canvas" title="asynckivy.sandwich_canvas"><code class="xref py py-func docutils literal notranslate"><span class="pre">sandwich_canvas()</span></code></a> for details.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.1.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.10.0: </span>The <code class="docutils literal notranslate"><span class="pre">use_outer_canvas</span></code> parameter was replaced with the <code class="docutils literal notranslate"><span class="pre">working_layer</span></code> parameter.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.stencil_widget_mask">
<span class="sig-name descname"><span class="pre">stencil_widget_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">widget</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">working_layer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inner'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator" title="(in Python v3.14)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://kivy.org/doc/master/api-kivy.graphics.html#kivy.graphics.InstructionGroup" title="(in Kivy v3.0.0.dev0)"><span class="pre">kivy.graphics.InstructionGroup</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#asynckivy.stencil_widget_mask" title="Link to this definition">Â¶</a></dt>
<dd><p>Returns a context manager that restricts the drawing area to the widgetâ€™s own area.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">stencil_widget_mask</span><span class="p">(</span><span class="n">widget</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>relative</strong> â€“ Must be set to True if the <code class="docutils literal notranslate"><span class="pre">widget</span></code> is a relative-type widget.</p></li>
<li><p><strong>working_layer</strong> â€“ Controls which part of the widgetâ€™s canvas is affected by the restriction.
See <a class="reference internal" href="#asynckivy.sandwich_canvas" title="asynckivy.sandwich_canvas"><code class="xref py py-func docutils literal notranslate"><span class="pre">sandwich_canvas()</span></code></a> for details.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.9.1.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.10.0: </span>The <code class="docutils literal notranslate"><span class="pre">use_outer_canvas</span></code> parameter was replaced with the <code class="docutils literal notranslate"><span class="pre">working_layer</span></code> parameter.</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asynckivy.suppress_event">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">suppress_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_dispatcher</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter=&lt;function</span> <span class="pre">suppress_event.&lt;lambda&gt;&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.suppress_event" title="Link to this definition">Â¶</a></dt>
<dd><p>Returns a context manager that prevents the callback functions (including the default handler) bound to an event
from being called.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">kivy.uix.button</span><span class="w"> </span><span class="kn">import</span> <span class="n">Button</span>

<span class="n">btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">()</span>
<span class="hll"><span class="n">btn</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">__</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;pressed&quot;</span><span class="p">))</span>
</span><span class="k">with</span> <span class="n">suppress_event</span><span class="p">(</span><span class="n">btn</span><span class="p">,</span> <span class="s1">&#39;on_press&#39;</span><span class="p">):</span>
    <span class="n">btn</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;on_press&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above code prints nothing because the callback function wonâ€™t be called.</p>
<p>Strictly speaking, this context manager doesnâ€™t prevent all callback functions from being called.
It only prevents the callback functions that were bound to an event before the context manager enters.
Thus, the following code prints <code class="docutils literal notranslate"><span class="pre">pressed</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">kivy.uix.button</span><span class="w"> </span><span class="kn">import</span> <span class="n">Button</span>

<span class="n">btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">()</span>
<span class="k">with</span> <span class="n">suppress_event</span><span class="p">(</span><span class="n">btn</span><span class="p">,</span> <span class="s1">&#39;on_press&#39;</span><span class="p">):</span>
<span class="hll">    <span class="n">btn</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">__</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;pressed&quot;</span><span class="p">))</span>
</span>    <span class="n">btn</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;on_press&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asynckivy.sync_attr">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sync_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://kivy.org/doc/master/api-kivy.event.html#kivy.event.EventDispatcher" title="(in Kivy v3.0.0.dev0)"><span class="pre">kivy.event.EventDispatcher</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.14)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.sync_attr" title="Link to this definition">Â¶</a></dt>
<dd><p>Creates one-directional binding between attributes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">types</span>

<span class="n">widget</span> <span class="o">=</span> <span class="n">Widget</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">SimpleNamespace</span><span class="p">()</span>

<span class="n">sync_attr</span><span class="p">(</span><span class="n">from_</span><span class="o">=</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">to_</span><span class="o">=</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;xx&#39;</span><span class="p">))</span>
<span class="k">assert</span> <span class="n">obj</span><span class="o">.</span><span class="n">xx</span> <span class="o">==</span> <span class="mi">100</span>  <span class="c1"># synchronized</span>
<span class="n">widget</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">assert</span> <span class="n">obj</span><span class="o">.</span><span class="n">xx</span> <span class="o">==</span> <span class="mi">10</span>  <span class="c1"># synchronized</span>
<span class="n">obj</span><span class="o">.</span><span class="n">xx</span> <span class="o">=</span> <span class="mi">20</span>
<span class="k">assert</span> <span class="n">widget</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="mi">10</span>  <span class="c1"># but not the other way around</span>
</pre></div>
</div>
<p>To make its effect temporary, use it with a with-statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The effect lasts only within the with-block.</span>
<span class="k">with</span> <span class="n">sync_attr</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This can be particularly useful when combined with <a class="reference internal" href="#asynckivy.transform" title="asynckivy.transform"><code class="xref py py-func docutils literal notranslate"><span class="pre">transform()</span></code></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">kivy.graphics</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rotate</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">rotate_widget</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mf">360.</span><span class="p">):</span>
    <span class="n">rotate</span> <span class="o">=</span> <span class="n">Rotate</span><span class="p">()</span>
    <span class="k">with</span> <span class="p">(</span>
        <span class="n">transform</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span> <span class="k">as</span> <span class="n">ig</span><span class="p">,</span>
        <span class="n">sync_attr</span><span class="p">(</span><span class="n">from_</span><span class="o">=</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">),</span> <span class="n">to_</span><span class="o">=</span><span class="p">(</span><span class="n">rotate</span><span class="p">,</span> <span class="s1">&#39;origin&#39;</span><span class="p">)),</span>
    <span class="p">):</span>
        <span class="n">ig</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">rotate</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">anim_attrs</span><span class="p">(</span><span class="n">rotate</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="n">angle</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.6.1.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.8.0: </span>The context manager now applies its effect upon creation, rather than when its <code class="docutils literal notranslate"><span class="pre">__enter__()</span></code> method is
called, and <code class="docutils literal notranslate"><span class="pre">__enter__()</span></code> no longer performs any action.</p>
<p>Additionally, the context manager now assigns the <code class="docutils literal notranslate"><span class="pre">from_</span></code> value to the <code class="docutils literal notranslate"><span class="pre">to_</span></code> upon creation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">sync_attr</span><span class="p">((</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;xx&#39;</span><span class="p">)):</span>
    <span class="k">assert</span> <span class="n">widget</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">obj</span><span class="o">.</span><span class="n">xx</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asynckivy.sync_attrs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sync_attrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://kivy.org/doc/master/api-kivy.event.html#kivy.event.EventDispatcher" title="(in Kivy v3.0.0.dev0)"><span class="pre">kivy.event.EventDispatcher</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">to_</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asynckivy.sync_attrs" title="Link to this definition">Â¶</a></dt>
<dd><p>When multiple <a class="reference internal" href="#asynckivy.sync_attr" title="asynckivy.sync_attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">sync_attr</span></code></a> calls take the same <code class="docutils literal notranslate"><span class="pre">from_</span></code> argument, they can be merged into a single
<a class="reference internal" href="#asynckivy.sync_attrs" title="asynckivy.sync_attrs"><code class="xref py py-class docutils literal notranslate"><span class="pre">sync_attrs</span></code></a> call. For instance, the following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">sync_attr</span><span class="p">((</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)),</span> <span class="n">sync_attr</span><span class="p">((</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">obj2</span><span class="p">,</span> <span class="s1">&#39;xx&#39;</span><span class="p">)):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>can be replaced with the following one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">sync_attrs</span><span class="p">((</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">obj2</span><span class="p">,</span> <span class="s1">&#39;xx&#39;</span><span class="p">)):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This can be particularly useful when combined with <a class="reference internal" href="#asynckivy.transform" title="asynckivy.transform"><code class="xref py py-func docutils literal notranslate"><span class="pre">transform()</span></code></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">kivy.graphics</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rotate</span><span class="p">,</span> <span class="n">Scale</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">scale_and_rotate_widget</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mf">360.</span><span class="p">):</span>
    <span class="n">rotate</span> <span class="o">=</span> <span class="n">Rotate</span><span class="p">()</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">Scale</span><span class="p">()</span>
    <span class="k">with</span> <span class="p">(</span>
        <span class="n">transform</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span> <span class="k">as</span> <span class="n">ig</span><span class="p">,</span>
        <span class="n">sync_attrs</span><span class="p">((</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">rotate</span><span class="p">,</span> <span class="s1">&#39;origin&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;origin&#39;</span><span class="p">)),</span>
    <span class="p">):</span>
        <span class="n">ig</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">rotate</span><span class="p">)</span>
        <span class="n">ig</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">wait_all</span><span class="p">(</span>
            <span class="n">anim_attrs</span><span class="p">(</span><span class="n">rotate</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="n">angle</span><span class="p">),</span>
            <span class="n">anim_attrs</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">scale</span><span class="p">),</span>
        <span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.6.1.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.8.0: </span>The context manager now applies its effect upon creation, rather than when its <code class="docutils literal notranslate"><span class="pre">__enter__()</span></code> method is
called, and <code class="docutils literal notranslate"><span class="pre">__enter__()</span></code> no longer performs any action.</p>
<p>Additionally, the context manager now assigns the <code class="docutils literal notranslate"><span class="pre">from_</span></code> value to the <code class="docutils literal notranslate"><span class="pre">to_</span></code> upon creation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">sync_attrs</span><span class="p">((</span><span class="n">widget</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;xx&#39;</span><span class="p">)):</span>
    <span class="k">assert</span> <span class="n">widget</span><span class="o">.</span><span class="n">x</span> <span class="ow">is</span> <span class="n">obj</span><span class="o">.</span><span class="n">xx</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="asynckivy.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">widget</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">working_layer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.14)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'inner'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'outer'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'inner_outer'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'inner'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator" title="(in Python v3.14)"><span class="pre">Iterator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://kivy.org/doc/master/api-kivy.graphics.html#kivy.graphics.InstructionGroup" title="(in Kivy v3.0.0.dev0)"><span class="pre">kivy.graphics.InstructionGroup</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#asynckivy.transform" title="Link to this definition">Â¶</a></dt>
<dd><p>Returns a context manager that helps apply transformations to the given widget.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">kivy.graphics</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rotate</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">rotate_widget</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="mf">360.</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">transform</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span> <span class="k">as</span> <span class="n">ig</span><span class="p">:</span>  <span class="c1"># &lt;- InstructionGroup</span>
        <span class="n">ig</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">rotate</span> <span class="o">:=</span> <span class="n">Rotate</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="n">widget</span><span class="o">.</span><span class="n">center</span><span class="p">))</span>
        <span class="k">await</span> <span class="n">anim_attrs</span><span class="p">(</span><span class="n">rotate</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="n">angle</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>working_layer</strong> â€“ Controls which part of the widgetâ€™s canvas is affected by the transformation.
See <a class="reference internal" href="#asynckivy.sandwich_canvas" title="asynckivy.sandwich_canvas"><code class="xref py py-func docutils literal notranslate"><span class="pre">sandwich_canvas()</span></code></a> for details.</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.10.0: </span>The <code class="docutils literal notranslate"><span class="pre">use_outer_canvas</span></code> parameter was replaced with the <code class="docutils literal notranslate"><span class="pre">working_layer</span></code> parameter.</p>
</div>
</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="submod-transition.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Transition (submodule)</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="notes-ja.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Notes ðŸ‡¯ðŸ‡µ</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, MitÅ NattÅsai
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">API Reference</a><ul>
<li><a class="reference internal" href="#asynckivy.anim_attrs"><code class="docutils literal notranslate"><span class="pre">anim_attrs()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.anim_attrs_abbr"><code class="docutils literal notranslate"><span class="pre">anim_attrs_abbr()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.anim_with_ratio"><code class="docutils literal notranslate"><span class="pre">anim_with_ratio()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.block_touch_events"><code class="docutils literal notranslate"><span class="pre">block_touch_events</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.event"><code class="docutils literal notranslate"><span class="pre">event()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.event_freq"><code class="docutils literal notranslate"><span class="pre">event_freq</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.fade_transition"><code class="docutils literal notranslate"><span class="pre">fade_transition()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.interpolate"><code class="docutils literal notranslate"><span class="pre">interpolate()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.interpolate_seq"><code class="docutils literal notranslate"><span class="pre">interpolate_seq()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.managed_start"><code class="docutils literal notranslate"><span class="pre">managed_start()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.move_on_after"><code class="docutils literal notranslate"><span class="pre">move_on_after()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.n_frames"><code class="docutils literal notranslate"><span class="pre">n_frames()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.rest_of_touch_events"><code class="docutils literal notranslate"><span class="pre">rest_of_touch_events()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.rest_of_touch_events_cm"><code class="docutils literal notranslate"><span class="pre">rest_of_touch_events_cm()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.run_in_executor"><code class="docutils literal notranslate"><span class="pre">run_in_executor()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.run_in_thread"><code class="docutils literal notranslate"><span class="pre">run_in_thread()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.sandwich_canvas"><code class="docutils literal notranslate"><span class="pre">sandwich_canvas()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.sleep"><code class="docutils literal notranslate"><span class="pre">sleep()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.sleep_free"><code class="docutils literal notranslate"><span class="pre">sleep_free()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.sleep_freq"><code class="docutils literal notranslate"><span class="pre">sleep_freq</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.smooth_attr"><code class="docutils literal notranslate"><span class="pre">smooth_attr</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.stencil_mask"><code class="docutils literal notranslate"><span class="pre">stencil_mask()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.stencil_widget_mask"><code class="docutils literal notranslate"><span class="pre">stencil_widget_mask()</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.suppress_event"><code class="docutils literal notranslate"><span class="pre">suppress_event</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.sync_attr"><code class="docutils literal notranslate"><span class="pre">sync_attr</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.sync_attrs"><code class="docutils literal notranslate"><span class="pre">sync_attrs</span></code></a></li>
<li><a class="reference internal" href="#asynckivy.transform"><code class="docutils literal notranslate"><span class="pre">transform()</span></code></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=1312878d"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    </body>
</html>